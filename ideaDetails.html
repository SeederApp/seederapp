<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN">
<div data-bb-type="screen" style="background-image:url('images/background.png'); background-color: #181818" data-bb-effect="slide-left" data-bb-scroll-effect="off"> 
	<script>
	bb.init({
		ondomready: function (element, id, params) {
			ideaId = params.ideaId;
			sendRequest("http://seederserver.aws.af.cm/index.php?ideas&command=getIdeaById&values[]="+ideaId, function (data){
				console.log (data[0][0]['title']);
				var title = document.getElementById("title");
				var accent = document.getElementsByClassName("data-bb-accent-text");
				title.setCaption(data[0][0]['title']);
				title.children[0].children[0].src = "images/categories/category-"+data[0][0]['idCategory']+".png";
				title.children[0].children[1].children[1].innerHTML += localStorage.getItem(data[0][0]['idCategory']);
			});
			
		}
	});
	function jump(id){
		var divid = document.getElementById(id);
		divid.style.display = 'block';
		divid.scrollIntoView(true);
		return false;
	}
	function hideSpinner() {
		document.getElementById('indicator').style.display="none";
		document.getElementById("message").style.display = "none";
	}
	function showSpinner() {
		document.getElementById('indicator').style.display="block";
		document.getElementById("message").style.display = "block";
	}
	function trim(s) {
		return s.replace(/^\s*/, "").replace(/\s*$/, "");
	}
	function sendRequest(url, callback) {
		var xmlhttp;
		if (window.XMLHttpRequest)
		{
			xmlhttp=new XMLHttpRequest();
		}
		xmlhttp.onreadystatechange=function(){
		  if (xmlhttp.readyState==4 && xmlhttp.status==200)
			{
				if (xmlhttp.responseText == "Failure to update user's coins number") {
					document.getElementById('indicator').style.display="none";
					document.getElementById('message').innerHTML="You do not have enough coins.";
					jump('mesasge');
				}
				else if (xmlhttp.responseText == "User does not have enough coins to create idea" || xmlhttp.responseText == "Failure to insert idea") {
					document.getElementById('indicator').style.display="none";
					document.getElementById('message').innerHTML="Database error.";
					jump('mesasge');
				}
				else{
					callback(JSON.parse(xmlhttp.responseText));}
			}
		}
		xmlhttp.open("GET",url,true);
		xmlhttp.send();
	}
	</script>
	<div id="title" data-bb-type="title" data-bb-accent-text="" data-bb-img=""></div>
	<div data-bb-type="action-bar" data-bb-back-caption ="Back"> 
		<!-- Action overflow -->
		<div id="voteButton" onClick="vote();" data-bb-type="action" data-bb-style="button" data-bb-overflow="true" data-bb-img="images/icons/vote.png">Enrich</div>
		<div onClick="recentIdeas();" data-bb-type="action" data-bb-style="button" data-bb-overflow="true" data-bb-img="images/icons/share.png">Share</div>
		<div onClick="newIdea()" data-bb-type="action" data-bb-style="button" data-bb-overflow="true" data-bb-img="images/icons/report.png">Report Idea</div>
	</div>
</div>